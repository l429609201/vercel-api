<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vercel API Proxy - ä¸‡èƒ½ä»£ç†</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif; 
      max-width: 900px; 
      margin: 0 auto; 
      padding: 20px; 
      background: #f9fafb;
      color: #1f2937;
      line-height: 1.6;
    }
    h1 { font-size: 2rem; margin-bottom: 10px; }
    h2 { font-size: 1.25rem; margin-bottom: 12px; color: #374151; }
    p { color: #6b7280; margin-bottom: 10px; }
    code { 
      background: #e5e7eb; 
      padding: 2px 6px; 
      border-radius: 4px; 
      font-family: 'Monaco', 'Consolas', monospace;
      font-size: 0.9em;
    }
    .card { 
      background: white; 
      border-radius: 12px; 
      padding: 24px; 
      margin-bottom: 20px; 
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .test-btn { 
      background: #3b82f6; 
      color: white; 
      border: none; 
      padding: 12px 24px; 
      border-radius: 8px; 
      cursor: pointer; 
      font-size: 16px; 
      font-weight: 500;
      transition: background 0.2s;
    }
    .test-btn:hover { background: #2563eb; }
    .test-btn:disabled { background: #9ca3af; cursor: not-allowed; }
    .result { 
      margin-top: 20px; 
      padding: 16px; 
      background: #f3f4f6; 
      border-radius: 8px; 
    }
    .result-item { 
      display: flex; 
      justify-content: space-between; 
      align-items: center;
      padding: 10px 0; 
      border-bottom: 1px solid #e5e7eb; 
    }
    .result-item:last-child { border-bottom: none; }
    .label { color: #6b7280; font-size: 14px; }
    .value { font-weight: 600; color: #1f2937; }
    .success { color: #10b981; }
    .error { color: #ef4444; }
    .loading { color: #6b7280; text-align: center; padding: 20px; }
    .badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
    }
    .badge-success { background: #d1fae5; color: #065f46; }
    .badge-info { background: #dbeafe; color: #1e40af; }
    .example-block {
      background: #1f2937;
      color: #e5e7eb;
      padding: 16px;
      border-radius: 8px;
      margin: 12px 0;
      overflow-x: auto;
    }
    .example-block code {
      background: transparent;
      color: #fbbf24;
    }
    .footer {
      text-align: center;
      padding: 20px;
      color: #9ca3af;
      font-size: 14px;
    }
    .footer a { color: #3b82f6; text-decoration: none; }
    .footer a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="card">
    <h1>ğŸš€ Vercel API Proxy</h1>
    <p>ä¸‡èƒ½ä»£ç†æœåŠ¡ï¼Œæ”¯æŒä»£ç†å…¨ç½‘ä¸€åˆ‡æ¥å£ï¼ŒåŒ…æ‹¬ OpenAIã€GitHubã€Google ç­‰ã€‚</p>
  </div>

  <div class="card">
    <h2>ğŸ“ å‡ºå£ IP æµ‹è¯•</h2>
    <p>æµ‹è¯•ä»£ç†æœåŠ¡å™¨çš„å‡ºå£ IP å’Œåœ°ç†ä½ç½®ä¿¡æ¯</p>
    <button class="test-btn" id="testBtn" onclick="testServerInfo()">æµ‹è¯•å‡ºå£ IP</button>
    <div id="result" class="result" style="display: none;"></div>
  </div>

  <div class="card">
    <h2>ğŸ“– ä½¿ç”¨æ–¹æ³•</h2>
    <p>å°†ç›®æ ‡ URL æŒ‰ä»¥ä¸‹æ ¼å¼æ‹¼æ¥åˆ°æœ¬æœåŠ¡åŸŸååï¼š</p>
    <div class="example-block">
      <code>https://ä½ çš„åŸŸå/<strong>https</strong>/ç›®æ ‡åŸŸå/è·¯å¾„</code>
    </div>
    
    <h3 style="margin-top: 20px; font-size: 1rem; color: #374151;">ç¤ºä¾‹</h3>
    
    <p style="margin-top: 12px;"><strong>OpenAI API:</strong></p>
    <div class="example-block">
      <code>https://ä½ çš„åŸŸå/https/api.openai.com/v1/chat/completions</code>
    </div>
    
    <p><strong>GitHub:</strong></p>
    <div class="example-block">
      <code>https://ä½ çš„åŸŸå/https/github.com/ç”¨æˆ·å/ä»“åº“å</code>
    </div>
    
    <p><strong>Google:</strong></p>
    <div class="example-block">
      <code>https://ä½ çš„åŸŸå/https/www.google.com/search?q=å…³é”®è¯</code>
    </div>
  </div>

  <div class="footer">
    <p>Powered by <a href="https://vercel.com" target="_blank">Vercel</a> | 
    <a href="https://github.com/l429609201/vercel-api" target="_blank">GitHub</a></p>
  </div>

  <script>
    async function testServerInfo() {
      const btn = document.getElementById('testBtn');
      const resultDiv = document.getElementById('result');
      
      btn.disabled = true;
      btn.textContent = 'æµ‹è¯•ä¸­...';
      resultDiv.style.display = 'block';
      resultDiv.innerHTML = '<p class="loading">â³ æ­£åœ¨è·å–æœåŠ¡å™¨ä¿¡æ¯...</p>';
      
      const startTime = Date.now();
      
      try {
        const response = await fetch('/api/server_info');
        const latency = Date.now() - startTime;
        const data = await response.json();
        
        if (data.code === 0) {
          const info = data.data;
          
          // åœ°åŒºåç§°æ˜ å°„
          const regionNames = {
            'sin1': 'ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ (sin1)',
            'hkg1': 'ğŸ‡­ğŸ‡° é¦™æ¸¯ (hkg1)',
            'nrt1': 'ğŸ‡¯ğŸ‡µ ä¸œäº¬ (nrt1)',
            'icn1': 'ğŸ‡°ğŸ‡· é¦–å°” (icn1)',
            'sfo1': 'ğŸ‡ºğŸ‡¸ æ—§é‡‘å±± (sfo1)',
            'iad1': 'ğŸ‡ºğŸ‡¸ åç››é¡¿ (iad1)',
            'cdg1': 'ğŸ‡«ğŸ‡· å·´é» (cdg1)',
            'fra1': 'ğŸ‡©ğŸ‡ª æ³•å…°å…‹ç¦ (fra1)',
            'syd1': 'ğŸ‡¦ğŸ‡º æ‚‰å°¼ (syd1)',
          };
          
          const edgeDisplay = regionNames[info.edge_region] || info.edge_region;
          const cityDisplay = info.city ? decodeURIComponent(info.city) : '-';
          const locationDisplay = [info.country, info.country_region, cityDisplay].filter(x => x && x !== '-').join(' / ');
          
          resultDiv.innerHTML = `
            <div class="result-item">
              <span class="label">çŠ¶æ€</span>
              <span class="value"><span class="badge badge-success">âœ“ è¿æ¥æˆåŠŸ</span></span>
            </div>
            <div class="result-item">
              <span class="label">å“åº”å»¶è¿Ÿ</span>
              <span class="value">${latency} ms</span>
            </div>
            <div class="result-item">
              <span class="label">å‡ºå£ IP</span>
              <span class="value">${info.addr}</span>
            </div>
            <div class="result-item">
              <span class="label">åœ°ç†ä½ç½®</span>
              <span class="value">${locationDisplay || '-'}</span>
            </div>
            <div class="result-item">
              <span class="label">è¾¹ç¼˜èŠ‚ç‚¹</span>
              <span class="value"><span class="badge badge-info">${edgeDisplay}</span></span>
            </div>
            ${info.latitude ? `
            <div class="result-item">
              <span class="label">åæ ‡</span>
              <span class="value">${info.latitude}, ${info.longitude}</span>
            </div>
            ` : ''}
          `;
        } else {
          resultDiv.innerHTML = `<p class="error">âŒ æµ‹è¯•å¤±è´¥: ${data.message}</p>`;
        }
      } catch (error) {
        resultDiv.innerHTML = `<p class="error">âŒ è¯·æ±‚å¤±è´¥: ${error.message}</p>`;
      } finally {
        btn.disabled = false;
        btn.textContent = 'æµ‹è¯•å‡ºå£ IP';
      }
    }
  </script>
</body>
</html>
